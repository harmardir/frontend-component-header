{"version":3,"file":"index.js","names":["React","useLayoutEffect","useState","PropTypes","classNames","POSITION_VARIANTS","Sticky","forwardRef","_ref","ref","position","children","offset","className","rest","_objectWithoutProperties","_excluded","_useState","_useState2","_slicedToArray","isSticky","setIsSticky","defaultRef","useRef","resolvedRef","current","stickyElement","elementStyles","window","getComputedStyle","elementOffset","elementWithOffset","parseInt","observer","IntersectionObserver","_ref2","_ref3","entry","intersectionRatio","threshold","rootMargin","concat","observe","unobserve","createElement","_extends","propTypes","node","isRequired","oneOf","oneOfType","number","string","defaultProps","undefined"],"sources":["../../src/Sticky/index.jsx"],"sourcesContent":["import React, { useLayoutEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst POSITION_VARIANTS = [\n  'top',\n  'bottom',\n];\n\nconst Sticky = React.forwardRef(({\n  position,\n  children,\n  offset,\n  className,\n  ...rest\n}, ref) => {\n  const [isSticky, setIsSticky] = useState(false);\n  const defaultRef = React.useRef();\n  const resolvedRef = ref || defaultRef;\n\n  // eslint-disable-next-line consistent-return\n  useLayoutEffect(() => {\n    if (resolvedRef.current) {\n      const stickyElement = resolvedRef.current;\n      // getComputedStyle is used to get real top/bottom\n      // values on the page for proper shadows display\n      const elementStyles = window.getComputedStyle(stickyElement);\n      const elementOffset = elementStyles[position || 'top'];\n      // Margin calculations according to the offset.\n      // 1 pixel above/bellow + offset pixels that determines\n      // when callback function is called\n      const elementWithOffset = 1 + (parseInt(elementOffset, 10) || 0);\n      const observer = new IntersectionObserver(\n        ([entry]) => setIsSticky(entry.intersectionRatio < 1),\n        {\n          threshold: [1],\n          rootMargin: position === 'bottom'\n            ? `0px 0px -${elementWithOffset}px 0px`\n            : `-${elementWithOffset}px 0px 0px 0px`,\n        },\n      );\n      observer.observe(stickyElement);\n\n      return () => {\n        observer.unobserve(stickyElement);\n      };\n    }\n  }, [position, resolvedRef]);\n\n  return (\n    <div\n      className={classNames(\n        'pgn__sticky',\n        `pgn__sticky-${position || 'top'}`,\n        offset ? `pgn__sticky-offset--${offset}` : '',\n        { 'pgn__sticky-shadow': isSticky },\n        className,\n      )}\n      ref={resolvedRef}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n});\n\nSticky.propTypes = {\n  /** Specifies content of the component. */\n  children: PropTypes.node.isRequired,\n  /** Specifies position of the element. */\n  position: PropTypes.oneOf(POSITION_VARIANTS),\n  /**\n   * Specifies offset from top/bottom depending on the `position` property.\n   *\n   * Valid values are based on `the spacing classes`:\n   * `0, 0.5, ... 6`.\n   */\n  offset: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  /** Specifies an additional `className` to add to the base element. */\n  className: PropTypes.string,\n};\n\nSticky.defaultProps = {\n  position: 'top',\n  offset: undefined,\n  className: undefined,\n};\n\nexport default Sticky;\n"],"mappings":"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","ignoreList":[]}