{"version":3,"file":"CollapsibleButtonGroup.js","names":["React","useContext","useMemo","useState","PropTypes","MoreVert","useToggle","useWindowSize","DataTableContext","Icon","IconButton","breakpoints","ModalPopup","Stack","Button","ACTION_OVERFLOW_BUTTON_TEXT","SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT","CollapsibleButtonGroup","_ref","className","actions","rest","_objectWithoutProperties","_excluded","_useToggle","_useToggle2","_slicedToArray","isOverflowMenuOpen","openOverflowMenu","closeOverflowMenu","_useState","_useState2","overflowMenuTarget","setOverflowMenuTarget","_useContext","_useContext$controlle","controlledTableSelections","isEntireTableSelected","selectedFlatRows","rows","_useWindowSize","width","selectedRows","_useMemo","small","minWidth","_toConsumableArray","firstTwoActions","splice","extraActions","slice","reverse","_useMemo2","visibleActions","dropdownActions","cloneAction","action","index","cloneElement","component","_objectSpread","key","concat","as","args","createElement","_extends","length","Fragment","variant","iconAs","src","alt","id","ref","onClick","positionRef","onClose","placement","isOpen","gap","map","defaultProps","propTypes","string","arrayOf","shape","oneOfType","element","elementType","isRequired"],"sources":["../../src/DataTable/CollapsibleButtonGroup.jsx"],"sourcesContent":["import React, { useContext, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { MoreVert } from '../../icons';\nimport useToggle from '../hooks/useToggle';\nimport useWindowSize from '../hooks/useWindowSize';\nimport DataTableContext from './DataTableContext';\nimport Icon from '../Icon';\nimport IconButton from '../IconButton';\nimport breakpoints from '../utils/breakpoints';\nimport ModalPopup from '../Modal/ModalPopup';\nimport Stack from '../Stack';\nimport Button from '../Button';\n\nexport const ACTION_OVERFLOW_BUTTON_TEXT = 'More actions';\nexport const SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT = 'Actions';\n\nfunction CollapsibleButtonGroup({\n  className,\n  actions,\n  ...rest\n}) {\n  const [isOverflowMenuOpen, openOverflowMenu, closeOverflowMenu] = useToggle(false);\n  const [overflowMenuTarget, setOverflowMenuTarget] = useState(null);\n  const {\n    controlledTableSelections: [{ isEntireTableSelected }],\n    selectedFlatRows,\n    rows,\n  } = useContext(DataTableContext);\n  const { width } = useWindowSize();\n  const selectedRows = selectedFlatRows || rows;\n\n  const [visibleActions, dropdownActions] = useMemo(() => {\n    if (width < breakpoints.small.minWidth) {\n      // On a small screen, all actions will be in the overflow menu\n      return [[], [...actions]];\n    }\n    // The first two actions will be displayed as buttons, the rest will go in an overflow menu\n    const firstTwoActions = [...actions].splice(0, 2);\n    const extraActions = [...actions].slice(2);\n\n    /*  Reversing the array because to the user it makes sense to put the primary button first,\n        but we want it on the right */\n    return [firstTwoActions.reverse(), extraActions];\n  }, [actions, width]);\n\n  if (!isEntireTableSelected && !selectedRows) {\n    return null;\n  }\n\n  const cloneAction = (action, index) => React.cloneElement(\n    action.component,\n    {\n      // eslint-disable-next-line react/no-array-index-key\n      key: `${action}${index}`,\n      as: Button, // for backwards compatibility this is needed\n      ...action.args,\n    },\n  );\n\n  return (\n    <div className={className} {...rest}>\n      {dropdownActions.length > 0 && (\n        <>\n          <IconButton\n            variant=\"secondary\"\n            iconAs={Icon}\n            src={MoreVert}\n            alt={width > breakpoints.small.minWidth\n              ? ACTION_OVERFLOW_BUTTON_TEXT : SMALL_SCREEN_ACTION_OVERFLOW_BUTTON_TEXT}\n            id=\"actions-dropdown\"\n            ref={setOverflowMenuTarget}\n            onClick={openOverflowMenu}\n          />\n          <ModalPopup\n            positionRef={overflowMenuTarget}\n            onClose={closeOverflowMenu}\n            placement=\"bottom-end\"\n            isOpen={isOverflowMenuOpen}\n          >\n            <div className=\"pgn__datatable__overflow-actions-menu\">\n              <Stack gap={2}>\n                {dropdownActions.map(cloneAction)}\n              </Stack>\n            </div>\n          </ModalPopup>\n        </>\n      )}\n      <div className=\"pgn__datatable__visible-actions\">\n        {visibleActions.map(cloneAction)}\n      </div>\n    </div>\n  );\n}\n\nCollapsibleButtonGroup.defaultProps = {\n  className: null,\n};\n\nCollapsibleButtonGroup.propTypes = {\n  /** Class names for the div wrapping the button components */\n  className: PropTypes.string,\n  /** Array of action objects, containing a component and their callback args */\n  actions: PropTypes.arrayOf(PropTypes.shape({\n    component: PropTypes.oneOfType([PropTypes.element, PropTypes.elementType]).isRequired,\n    args: PropTypes.shape({}),\n  })).isRequired,\n};\n\nexport default CollapsibleButtonGroup;\n"],"mappings":"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","ignoreList":[]}