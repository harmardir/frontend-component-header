{"version":3,"file":"index.js","names":["React","PropTypes","classNames","DropdownButton","DropdownMenu","DropdownItem","withDeprecatedProps","DeprTypes","_React$createContext","createContext","Provider","Consumer","Dropdown","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","e","containerRef","current","contains","target","state","open","close","key","preventDefault","focusPrevious","focusNext","shiftKey","stopPropagation","uniqueId","idCounter","triggerId","concat","createRef","menuRef","buttonRef","_createClass","value","componentDidUpdate","prevProps","prevState","focusFirst","focus","componentWillUnmount","document","removeEventListener","handleDocumentClick","getFocusableElements","selector","Array","from","querySelectorAll","setState","addEventListener","focusableElements","length","allFocusableElements","activeIndex","indexOf","activeElement","nextIndex","previousIndex","render","_this$props","children","other","_objectWithoutProperties","_excluded","createElement","_extends","className","show","ref","handleMenuKeyDown","isOpen","toggle","Component","propTypes","node","Item","Button","Menu","DropdownWithDeprecatedProps","menuItems","deprType","MOVED_AND_FORMAT","message","newName","transform","allProps","isArray","Fragment","isValidElement","iconElement","title","map","menuItem","i","cloneElement","href","label","REMOVED","buttonType","defaultProps"],"sources":["../../../src/Dropdown/deprecated/index.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n// eslint-disable-next-line import/no-cycle\nimport DropdownButton from './DropdownButton';\n// eslint-disable-next-line import/no-cycle\nimport DropdownMenu from './DropdownMenu';\nimport DropdownItem from './DropdownItem';\n\nimport withDeprecatedProps, { DeprTypes } from '../../withDeprecatedProps';\n\nconst { Provider, Consumer } = React.createContext();\n\nclass Dropdown extends React.Component {\n  // eslint-disable-next-line react/sort-comp\n  static idCounter = 0; // For creating unique ids\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n    };\n\n    // Used for aria labelling. Increment the id counter so the next id can be unique\n    this.uniqueId = Dropdown.idCounter;\n    Dropdown.idCounter += 1;\n    this.triggerId = `pgn__dropdown-trigger-${this.uniqueId}`;\n\n    this.containerRef = React.createRef();\n    this.menuRef = React.createRef();\n    this.buttonRef = React.createRef();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.open !== this.state.open) {\n      if (this.state.open) {\n        this.focusFirst();\n      } else {\n        this.buttonRef.current.focus();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('click', this.handleDocumentClick, true);\n  }\n\n  getFocusableElements() {\n    const selector = 'button:not([disabled]), [href]:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"]):not([disabled])';\n    return Array.from(this.menuRef.current.querySelectorAll(selector));\n  }\n\n  handleDocumentClick = (e) => {\n    if (this.containerRef.current.contains(e.target) && this.containerRef.current !== e.target) {\n      return;\n    }\n    if (this.state.open) {\n      this.close();\n    }\n  };\n\n  handleMenuKeyDown = (e) => {\n    switch (e.key) {\n      case 'ArrowUp':\n        e.preventDefault();\n        this.focusPrevious();\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        this.focusNext();\n        break;\n      case 'Tab':\n        e.preventDefault();\n        if (e.shiftKey) {\n          this.focusPrevious();\n        } else {\n          this.focusNext();\n        }\n        break;\n      case 'Escape':\n        e.stopPropagation();\n        this.close();\n        break;\n      default:\n        break;\n    }\n  };\n\n  toggle = () => {\n    if (this.state.open) {\n      this.close();\n    } else {\n      this.open();\n    }\n  };\n\n  close() {\n    document.removeEventListener('click', this.handleDocumentClick, true);\n    this.setState({\n      open: false,\n    });\n  }\n\n  open() {\n    // adding event listener here so the user can close dropdown on click outside of the dropdown\n    document.addEventListener('click', this.handleDocumentClick, true);\n    this.setState({\n      open: true,\n    });\n  }\n\n  focusFirst() {\n    const focusableElements = this.getFocusableElements();\n    if (focusableElements.length) { focusableElements[0].focus(); }\n  }\n\n  focusNext() {\n    const allFocusableElements = this.getFocusableElements();\n    if (allFocusableElements.length === 0) { return; }\n    const activeIndex = allFocusableElements.indexOf(document.activeElement);\n    const nextIndex = (activeIndex + 1) % allFocusableElements.length;\n    allFocusableElements[nextIndex].focus();\n  }\n\n  focusPrevious() {\n    const allFocusableElements = this.getFocusableElements();\n    if (allFocusableElements.length === 0) { return; }\n    const activeIndex = allFocusableElements.indexOf(document.activeElement);\n    const previousIndex = ((activeIndex - 1) + allFocusableElements.length) % allFocusableElements.length;\n    allFocusableElements[previousIndex].focus();\n  }\n\n  render() {\n    const { children, ...other } = this.props;\n\n    return (\n      <div\n        {...other}\n        className={classNames(\n          'dropdown',\n          { show: this.state.open },\n          other.className,\n        )}\n        ref={this.containerRef}\n      >\n        <Provider\n          value={{\n            buttonRef: this.buttonRef,\n            handleMenuKeyDown: this.handleMenuKeyDown,\n            isOpen: this.state.open,\n            menuRef: this.menuRef,\n            toggle: this.toggle,\n            triggerId: this.triggerId,\n          }}\n        >\n          {children}\n        </Provider>\n      </div>\n    );\n  }\n}\n\nDropdown.propTypes = {\n  children: PropTypes.node,\n};\n\nDropdown.Item = DropdownItem;\nDropdown.Button = DropdownButton;\nDropdown.Menu = DropdownMenu;\n\nconst DropdownWithDeprecatedProps = withDeprecatedProps(Dropdown, 'Dropdown', {\n  menuItems: {\n    deprType: DeprTypes.MOVED_AND_FORMAT,\n    message: 'They should be components sent as children.',\n    newName: 'children',\n    transform: (menuItems, allProps) => {\n      if (!Array.isArray(menuItems)) { return null; }\n      return (\n        <>\n          <DropdownButton>\n            {React.isValidElement(allProps.iconElement) ? allProps.iconElement : null }\n            {allProps.title}\n          </DropdownButton>\n          <DropdownMenu>\n            {menuItems.map((menuItem, i) => {\n            /* eslint-disable react/no-array-index-key */\n              if (React.isValidElement(menuItem)) {\n                return React.cloneElement(menuItem, {\n                  className: 'dropdown-item',\n                  key: i,\n                });\n              }\n              return <DropdownItem key={i} href={menuItem.href}>{menuItem.label}</DropdownItem>;\n            /* eslint-enable react/no-array-index-key */\n            })}\n          </DropdownMenu>\n        </>\n      );\n    },\n  },\n  title: {\n    deprType: DeprTypes.REMOVED,\n    message: 'It should be specified inside the Dropdown.Button component',\n  },\n  buttonType: {\n    deprType: DeprTypes.REMOVED,\n    message: 'It should be specified as a className prop',\n  },\n  iconElement: {\n    deprType: DeprTypes.REMOVED,\n    message: 'It should be specified inside the buttonContent prop.',\n  },\n});\n\nDropdownWithDeprecatedProps.propTypes = Dropdown.propTypes;\nDropdownWithDeprecatedProps.defaultProps = Dropdown.defaultProps;\nDropdownWithDeprecatedProps.Item = Dropdown.Item;\nDropdownWithDeprecatedProps.Button = Dropdown.Button;\nDropdownWithDeprecatedProps.Menu = Dropdown.Menu;\n\nexport { Provider, Consumer };\nexport default DropdownWithDeprecatedProps;\n"],"mappings":"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","ignoreList":[]}