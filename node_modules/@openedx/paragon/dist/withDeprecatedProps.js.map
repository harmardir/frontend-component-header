{"version":3,"file":"withDeprecatedProps.js","names":["React","DeprTypes","withDeprecatedProps","WrappedComponent","componentName","deprecatedProps","WithDeprecatedProps","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","transformProps","bind","_assertThisInitialized","_createClass","key","value","warn","message","process","env","NODE_ENV","console","concat","acc","propName","undefined","_deprecatedProps$prop","deprType","newName","expect","transform","MOVED","REMOVED","FORMAT","MOVED_AND_FORMAT","render","_Object$keys$reduce","Object","keys","reduce","children","transformedProps","_objectWithoutProperties","_excluded","createElement","Component","_defineProperty"],"sources":["../src/withDeprecatedProps.tsx"],"sourcesContent":["/* eslint no-console: 0 */\nimport React from 'react';\n\nexport enum DeprTypes {\n  MOVED = 'MOVED',\n  REMOVED = 'REMOVED',\n  FORMAT = 'FORMAT',\n  MOVED_AND_FORMAT = 'MOVED_AND_FORMAT',\n}\n\nexport interface DeprecatedProps extends Record<string, any> {\n  deprType: DeprTypes,\n  newName?: string,\n  expect?: (propValue: any) => boolean,\n  transform?: (propValue: any, allProps: Record<string, any>) => any,\n  message?: string,\n}\n\nfunction withDeprecatedProps<T extends Record<string, any>>(\n  WrappedComponent: React.ComponentType<any>,\n  componentName: string,\n  deprecatedProps: Record<string, DeprecatedProps>,\n) : any {\n  class WithDeprecatedProps extends React.Component<T> {\n    // eslint-disable-next-line react/static-property-placement\n    public static displayName = `withDeprecatedProps(${componentName})`;\n\n    constructor(props: T) {\n      super(props);\n      this.transformProps = this.transformProps.bind(this);\n    }\n\n    warn(message: string) {\n      if (process.env.NODE_ENV === 'development') {\n        if (console) { console.warn(`[Deprecated] ${message}`); }\n      }\n    }\n\n    transformProps(acc: Record<string, any>, propName: string) : Record<string, any> {\n      if (deprecatedProps[propName] === undefined) {\n        acc[propName] = this.props[propName];\n        return acc;\n      }\n\n      const {\n        deprType,\n        newName,\n        expect,\n        transform,\n        message,\n      } = deprecatedProps[propName];\n\n      switch (deprType) {\n        case DeprTypes.MOVED:\n          this.warn(`${componentName}: The prop '${propName}' has been moved to '${newName}'.`);\n          acc[newName!] = this.props[propName];\n          break;\n        case DeprTypes.REMOVED:\n          this.warn(`${componentName}: The prop '${propName}' has been removed. '${message}'`);\n          break;\n        case DeprTypes.FORMAT:\n          if (!expect!(this.props[propName])) {\n            this.warn(`${componentName}: The prop '${propName}' expects a new format. ${message}`);\n            acc[propName] = transform!(this.props[propName], this.props);\n          } else {\n            acc[propName] = this.props[propName];\n          }\n          break;\n        case DeprTypes.MOVED_AND_FORMAT:\n          this.warn(`${componentName}: The prop '${propName}' has been moved to '${newName}' and expects a new format. ${message}`);\n          acc[newName!] = transform!(this.props[propName], this.props);\n          break;\n        default:\n          acc[propName] = this.props[propName];\n          break;\n      }\n\n      return acc;\n    }\n\n    render() {\n      const { children, ...transformedProps } = Object\n        .keys(this.props)\n        .reduce(this.transformProps, {});\n\n      return (\n        <WrappedComponent {...transformedProps as T}>\n          {this.props.children || children}\n        </WrappedComponent>\n      );\n    }\n  }\n\n  return WithDeprecatedProps;\n}\n\nexport default withDeprecatedProps;\n"],"mappings":"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","ignoreList":[]}