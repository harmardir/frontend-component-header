{"version":3,"file":"index.js","names":["React","useCallback","useEffect","ProgressBarBase","PropTypes","classNames","Annotation","getOffsetStyles","placeInfoAtZero","ANNOTATION_CLASS","HINT_SWAP_PERCENT","PROGRESS_DEFAULT_VARIANT","THRESHOLD_DEFAULT_VARIANT","VARIANTS","ProgressBar","props","createElement","ProgressBarAnnotated","_ref","now","label","variant","threshold","thresholdLabel","thresholdVariant","progressHint","thresholdHint","_objectWithoutProperties","_excluded","progressInfoRef","useRef","thresholdInfoRef","thresholdPercent","isProgressHintAfter","isThresholdHintAfter","progressColor","includes","thresholdColor","direction","window","getComputedStyle","document","body","getPropertyValue","positionAnnotations","observer","ResizeObserver","progressInfoEl","current","observe","unobserve","getHint","text","className","style","ref","_extends","concat","srOnly","arrowPlacement","propTypes","number","node","oneOf","string","defaultProps","undefined","Annotated"],"sources":["../../src/ProgressBar/index.jsx"],"sourcesContent":["import React, { useCallback, useEffect } from 'react';\nimport ProgressBarBase from 'react-bootstrap/ProgressBar';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Annotation from '../Annotation';\nimport { getOffsetStyles, placeInfoAtZero } from './utils';\n\nexport const ANNOTATION_CLASS = 'pgn__annotation';\nconst HINT_SWAP_PERCENT = 50;\nconst PROGRESS_DEFAULT_VARIANT = 'warning';\nconst THRESHOLD_DEFAULT_VARIANT = 'dark';\nconst VARIANTS = [\n  'dark',\n  'warning',\n  'success',\n  'error',\n];\n\nfunction ProgressBar(props) {\n  return <ProgressBarBase {...props} />;\n}\n\nfunction ProgressBarAnnotated({\n  now,\n  label,\n  variant,\n  threshold,\n  thresholdLabel,\n  thresholdVariant,\n  progressHint,\n  thresholdHint,\n  ...props\n}) {\n  const progressInfoRef = React.useRef();\n  const thresholdInfoRef = React.useRef();\n  const thresholdPercent = (threshold || 0) - (now || 0);\n  const isProgressHintAfter = now < HINT_SWAP_PERCENT;\n  const isThresholdHintAfter = threshold < HINT_SWAP_PERCENT;\n  const progressColor = VARIANTS.includes(variant) ? variant : PROGRESS_DEFAULT_VARIANT;\n  const thresholdColor = VARIANTS.includes(thresholdVariant) ? thresholdVariant : THRESHOLD_DEFAULT_VARIANT;\n  const direction = window.getComputedStyle(document.body).getPropertyValue('direction');\n\n  const positionAnnotations = useCallback(() => {\n    placeInfoAtZero(progressInfoRef, direction, isProgressHintAfter, ANNOTATION_CLASS);\n    placeInfoAtZero(thresholdInfoRef, direction, isThresholdHintAfter, ANNOTATION_CLASS);\n  }, [direction, isProgressHintAfter, isThresholdHintAfter]);\n\n  useEffect(() => {\n    positionAnnotations();\n    const observer = new ResizeObserver(() => {\n      positionAnnotations();\n    });\n    const progressInfoEl = progressInfoRef.current;\n    observer.observe(progressInfoEl);\n    return () => progressInfoEl && observer.unobserve(progressInfoEl);\n  }, [positionAnnotations]);\n\n  const getHint = (text) => (\n    <span className=\"pgn__progress-hint\" data-testid=\"progress-hint\">\n      {text}\n    </span>\n  );\n\n  return (\n    <div className=\"pgn__progress-annotated\">\n      {!!label && (\n        <div\n          className=\"pgn__progress-info\"\n          style={getOffsetStyles(now, direction)}\n          ref={progressInfoRef}\n        >\n          {!isProgressHintAfter && getHint(progressHint)}\n          <Annotation variant={progressColor}>\n            {label}\n          </Annotation>\n          {isProgressHintAfter && getHint(progressHint)}\n        </div>\n      )}\n      <ProgressBarBase>\n        <ProgressBarBase\n          {...props}\n          now={now}\n          className={classNames(\n            `pgn__progress-bar--${progressColor}`,\n            thresholdPercent > 0 ? 'pgn__progress-tick--white' : 'pgn__progress-tick--black',\n          )}\n          srOnly\n        />\n        {!!threshold && (\n          <ProgressBarBase\n            now={thresholdPercent}\n            className={`pgn__progress-bar--${thresholdColor}`}\n            srOnly\n          />\n        )}\n      </ProgressBarBase>\n      {(!!threshold && !!thresholdLabel) && (\n        <div\n          className=\"pgn__progress-info\"\n          style={getOffsetStyles(threshold, direction)}\n          ref={thresholdInfoRef}\n        >\n          {!isThresholdHintAfter && getHint(thresholdHint)}\n          <Annotation\n            arrowPlacement=\"top\"\n            variant={thresholdColor}\n          >\n            {thresholdLabel}\n          </Annotation>\n          {isThresholdHintAfter && getHint(thresholdHint)}\n        </div>\n      )}\n    </div>\n  );\n}\n\nProgressBarAnnotated.propTypes = {\n  /** Current value of progress. */\n  now: PropTypes.number,\n  /** Show label that represents visual percentage. */\n  label: PropTypes.node,\n  /** The `ProgressBar` style variant to use. */\n  variant: PropTypes.oneOf(VARIANTS),\n  /** Specifies an additional `className` to add to the base element. */\n  className: PropTypes.string,\n  /** Threshold current value. */\n  threshold: PropTypes.number,\n  /** Specifies label for `threshold`. */\n  thresholdLabel: PropTypes.node,\n  /** Variant for threshold value. */\n  thresholdVariant: PropTypes.oneOf(VARIANTS),\n  /** Text near the progress annotation. */\n  progressHint: PropTypes.node,\n  /** Text near the threshold annotation. */\n  thresholdHint: PropTypes.node,\n};\n\nProgressBarAnnotated.defaultProps = {\n  now: undefined,\n  label: undefined,\n  variant: PROGRESS_DEFAULT_VARIANT,\n  className: undefined,\n  threshold: undefined,\n  thresholdLabel: undefined,\n  thresholdVariant: THRESHOLD_DEFAULT_VARIANT,\n  progressHint: undefined,\n  thresholdHint: undefined,\n};\n\nProgressBar.Annotated = ProgressBarAnnotated;\nexport default ProgressBar;\n"],"mappings":"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","ignoreList":[]}